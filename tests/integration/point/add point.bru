meta {
  name: add point
  type: http
  seq: 1
}

post {
  url: {{host}}/api/point
  body: json
  auth: inherit
}

body:json {
  {{point_creation}}
}

script:post-response {
  bru.setVar("latest_point", res.body.id);
}

tests {
  test("Return 200", () => {
    expect(res.status).to.equal(200);
  });
  
  test("Content of Point should be the same", ()=>{
    expect(res.body).to.include(bru.getVar("point_creation"));
  });
  
  test("Content type is JSON", () => {
    expect(res.getHeader("content-type")).to.contain("application/json");
  });
  
}

settings {
  encodeUrl: true
  timeout: 0
}
